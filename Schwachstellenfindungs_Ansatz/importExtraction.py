import os

def getImportStatements(file_path, exclude_list=[]):
    if(file_path==None):
        return []
    file_path = file_path.replace("\n","")
    file = open(file_path, "r", encoding="utf8")
    imports_list = []
    for line in file.readlines():
        skip_line = False
        if (line.find("import ") != -1):
            line = line.replace("import","")
            line = line.strip()
            for entry in exclude_list:
                if(line.find(entry)!=-1):
                    skip_line = True
                    break
                else:
                    pass
            if(skip_line):
                continue
            line = line.replace(";","")
            imports_list.append(line)
        pass
    file.close()
    return imports_list
    pass


def cutFileFromPath(file_path):
    array = file_path.rsplit("\\",1)
    return array

def getContentList(file_path):
    content_list = os.listdir(file_path)
    for content in content_list:
        if(content.find(".java")==-1):
            content_list.remove(content)
            pass
        pass
    return content_list
    pass

def convertToImportString(code_list, file_path):
    package_name = ""
    new_list = []
    file = open(file_path,"r",encoding="utf8")
    for line in file.readlines():
        if(line.find("package")!=-1):
            line = line.replace("package ","")
            line = line.replace(";","")
            line = line.replace("\n","")
            package_name = line
            break
        pass
    for code_part in code_list:
        new_list.append(package_name + "." + code_part)
        pass
    file.close()
    return new_list

    pass

#https://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html
def ClassReferenceExtraction(file_path):
    if(file_path == None):
        return []
    excluded_keywords = ["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","do","double","else","enum","extends","final","finally","float","for","for","goto","if","implements","import","instanceof","int","interface","long","native","new","package","private","protected","public","return","short","static","strict","super","switch","synchronized","this","throw","throws","transient","try","void","volatile","while"]
    file = open(file_path, "r",encoding="utf8")
    path_array = cutFileFromPath(file_path=file_path)
    location = path_array[0]
    content_list = getContentList(file_path=location)
    foreign_code_list = []



    for line in file.readlines():
        line = line.replace("("," ")
        line = line.replace(")"," ")
        line = line.replace("[", "")
        line = line.replace("]", "")
        line = line.replace(";", "")
        array = line.split(" ")
        counter = 0
        for code_part in array:
            if(code_part in excluded_keywords or code_part=="" or path_array[1].find(code_part)!=-1):
                counter = counter + 1
                continue
            if(code_part[0].isupper() and code_part + ".java" in content_list):
                foreign_code_list.append(code_part)
            pass
        pass
    foreign_code_list = convertToImportString(code_list=foreign_code_list,file_path=file_path)
    file.close()
    return foreign_code_list
    pass

